"use strict";(self.webpackChunkbill_splitter=self.webpackChunkbill_splitter||[]).push([[529],{4529:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var a=s(5043),n=s(3216),i=s(579);const r=function(e){let{filterLastMonths:t}=e;const[s,r]=(0,a.useState)([]),[d,l]=(0,a.useState)(""),o=(0,n.Zp)();return(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("receipts"))||[];let s=e;if(t){const a=new Date;a.setMonth(a.getMonth()-t),s=e.filter((e=>new Date(e.date)>=a))}r(s.map((e=>({...e,expanded:!1}))))}),[t]),(0,i.jsxs)("div",{className:"bills-page",children:[(0,i.jsx)("h2",{children:t?`Recent Transactions (Last ${t} Months)`:"All Restaurant Transactions"}),(0,i.jsxs)("div",{className:"sort-options",children:[(0,i.jsx)("label",{htmlFor:"sort",children:"Sort by: "}),(0,i.jsxs)("select",{id:"sort",value:d,onChange:e=>(e=>{l(e);const t=[...s];switch(e){case"amount":t.sort(((e,t)=>e.amount-t.amount));break;case"date":t.sort(((e,t)=>new Date(e.date)-new Date(t.date)));break;case"friends":t.sort(((e,t)=>e.friends.join(", ").localeCompare(t.friends.join(", "))));break;case"status":t.sort(((e,t)=>e.status.localeCompare(t.status)))}r(t)})(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Select"}),(0,i.jsx)("option",{value:"amount",children:"Amount"}),(0,i.jsx)("option",{value:"date",children:"Date"}),(0,i.jsx)("option",{value:"friends",children:"Person"}),(0,i.jsx)("option",{value:"status",children:"Status (Paid/Unpaid)"})]})]}),(0,i.jsx)("button",{onClick:()=>{o("/camera")},className:"add-receipt-button",children:"Add New Receipt"}),(0,i.jsx)("div",{className:"transactions-list",children:s.length>0?s.map((e=>(0,i.jsxs)("div",{className:"transaction-item",children:[(0,i.jsxs)("p",{onClick:()=>{return t=e.id,void r(s.map((e=>e.id===t?{...e,expanded:!e.expanded}:e)));var t},style:{cursor:"pointer",fontWeight:"bold"},children:["Date: ",e.date,e.expanded?" \u25b2":" \u25bc"]}),e.expanded&&(0,i.jsxs)("div",{className:"transaction-details",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Restaurant:"})," ",e.restaurant]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Amount:"})," $",e.amount.toFixed(2)]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Friends:"})," ",e.friends.join(", ")]}),(0,i.jsxs)("p",{className:`status ${e.status.toLowerCase()}`,children:[(0,i.jsx)("strong",{children:"Status:"})," ",e.status]}),e.image&&(0,i.jsxs)("div",{className:"receipt-image",children:[(0,i.jsx)("h4",{children:"Receipt Image:"}),(0,i.jsx)("img",{src:e.image,alt:"Receipt",style:{maxWidth:"100%"}})]}),(0,i.jsxs)("div",{className:"transaction-actions",children:[(0,i.jsxs)("button",{onClick:()=>(e=>{r(s.map((t=>t.id===e?{...t,status:"Paid"===t.status?"Unpaid":"Paid"}:t)));const t=s.map((t=>t.id===e?{...t,status:"Paid"===t.status?"Unpaid":"Paid"}:t));localStorage.setItem("receipts",JSON.stringify(t))})(e.id),className:"toggle-paid-button",children:["Mark as ","Paid"===e.status?"Unpaid":"Paid"]}),(0,i.jsx)("button",{onClick:()=>(e=>{alert(`Sending receipt for ${e.restaurant} to ${e.friends.join(", ")}`)})(e),className:"send-friend-button",children:"Send to Friend"})]})]})]},e.id))):(0,i.jsxs)("p",{children:["No transactions found for the last ",t," months."]})})]})}}}]);
//# sourceMappingURL=529.12715d2b.chunk.js.map